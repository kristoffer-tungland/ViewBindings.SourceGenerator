# ViewBinding.SourceGenerator
The ViewBinding.SourceGenerator allows you to bind view models to views within a generated ResourceDictionary. 

The source generator uses a Attribute to mark view models to include in the generated view binding. This attribute can be found in the ```ViewBindings.SourceGenerator.Contracts``` nuget package. 

## Use attribute from source generator
It's also an option to include the attribute from the source generator, to do this use the following package reference. 
```xml
<PackageReference Include="ViewBindings.SourceGenerator" Version="0.1.0" PrivateAssets="all" ExcludeAssets="runtime" />
```

## Usage
To bind a view model to a view, add the ```[ViewBinding]``` attribute to the view model, specifying the view type as a named argument. If no view type is provided, the attribute will search for the first view with a matching name based on a predetermined naming convention.

```csharp
using ViewBindings.SourceGenerator.Contracts.Attributes;

namespace ViewBindings.SourceGenerator.Demo.ViewModels;

[ViewBinding]
public class ViewModel : ViewModelBase
{
	
}
```

Generates a class ```GeneratedViewBindings.g.cs```

```csharp
// <auto-generated/>
#pragma warning disable
#nullable enable
using System;
using System.Windows;

namespace ViewBindings.SourceGenerator.Demo.Resources;
[global::System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
public class GeneratedViewBindings : ResourceDictionary
{
    public GeneratedViewBindings()
    {
        AddDataTemplate(typeof(global::ViewBindings.SourceGenerator.Demo.ViewModels.ViewModel), typeof(global::ViewBindings.SourceGenerator.Demo.Views.View));
    }

    void AddDataTemplate(Type viewModel, Type view)
    {
        var dataTemplate = new DataTemplate(viewModel)
        {VisualTree = new FrameworkElementFactory(view)};
        Add(new DataTemplateKey(viewModel), dataTemplate);
    }
}
```

The view model is mapped to the following view based on the predefined naming convention, where the view model's name is used to identify the corresponding view. Specifically, "ViewModel" is replaced with "View" and the first matching view found in the solution is selected.

``` View.xaml ```
```xml
<UserControl x:Class="ViewBindings.SourceGenerator.Demo.Views.View"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        
    </Grid>
</UserControl>
```
``` View.xaml.cs ```
```csharp
using System.Windows.Controls;

namespace ViewBindings.SourceGenerator.Demo.Views;

/// <summary>
/// Interaction logic for View2.xaml
/// </summary>
public partial class View : UserControl
{
    public View()
    {
        InitializeComponent();
    }
}
```
To use the ```GeneratedViewBindings``` calss, simply put it in ``` App.xaml ```
```xml
<Application x:Class="ViewBindings.SourceGenerator.Demo.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:resources="clr-namespace:ViewBindings.SourceGenerator.Demo.Resources"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
         <resources:GeneratedViewBindings />
    </Application.Resources>
</Application>
```
## Specify view type
If you choose not to use the predefined naming convention, you can specify the view to use by setting ```ViewType``` to the type of the desired view (e.g. ```typeof(View)```). This will result in the same ```GeneratedViewBindings``` as in the example above.

 ```csharp
using ViewBindings.SourceGenerator.Contracts.Attributes;
using ViewBindings.SourceGenerator.Demo.Views;

namespace ViewBindings.SourceGenerator.Demo.ViewModels;

[ViewBinding(ViewType = typeof(View))]
public class ViewModel : ViewModelBase
{

}
```

## Specify namespace for generated code
If you want the generated `GeneratedViewBindings` class to use a custom namespace,
decorate your assembly with the `ViewBindingsNamespace` attribute:

```csharp
using ViewBindings.SourceGenerator.Contracts.Attributes;

[assembly: ViewBindingsNamespace("Your.Custom.Namespace")]
```

The generator will prefer this namespace over the default `<project namespace>.Resources` value.
